---
title: "【软件测试理论基础】04-测试用例设计和编写阶段"
date: 2022-04-01T12:20:14+08:00
draft: false
author: ""
description: "软件测试-理论基础"
images: []

tags: ["软件测试","测试用例"]
categories: ["TP311 程序设计、软件工程"]

hiddenFromHomePage: false
hiddenFromSearch: false
ruby: true
fraction: true
fontawesome: true
linkToMarkdown: true
rssFullText: false

---

## 一、测试用例编写原则

#### 系统性

对系统业务流程要完整说明整个系统的业务需求、系统由几个子系统组成以及它们之间的关系；对模块业务流程要说明子系统内部功能、重点功能以及它们之间的关系。

#### 连贯性

对系统业务流程要说明各个子系统之间是如何连接在一起，若需要接口，各子系统之间是否有正确的接口，若是依靠页面链接，则页面的链接是否正确；对模块业务流程要说明同级模块以及上下级模块是如何构成一个子系统，其内部功能接口是否连贯。

#### 全面性

 应尽可能覆盖各种路径、尽可能覆盖各个业务点，并要考虑跨年、跨月的数据以及大数据量并发测试的准备。

#### 正确性

 输入界面后的数据应与测试文档所记录的数据一致，而预期结果也应与测试数据发生的业务吻合。

#### 可操作性

测试用例中要写清楚测试的操作步骤，以及不同的操作步骤相对应的测试结果。

#### 符合正常业务规则

测试数据要符合用户实际工作中的业务流程，同时也要兼顾各种业务的变化以及当前该业务行业的法律、法规、人名、地名、电话号码等应具有模拟功能，符合一般的命名惯例；不允许出现与知名人士、小说中人物名等雷同情况。<br />

---

## 二、测试用例编写标准

* 测试案例编写应该制订统一的模板进行，并约定模板的使用方法；
* 测试案例编写应当根据项目实际情况编写测试案例编写手册，包括案例编号规则、案例编写方法、案例编写内容、案例维护等内容；
* 案例编写应根据手册中约定的编写方法、内容等进行编写；
* 案例编写要步骤明确，输入输出要素清晰，并且与需求和缺陷相对应；
* 案例编写应严格根据需求规格说明书及测试需求功能分析点进行，要求覆盖全部需求功能点；
* 注重案例的可复用性，即在以后相似系统的测试过程中可以重复使用，减少测试设计工作量。<br />

---

## 三、测试用例编写要素

* 用例编号：项目+模块+编号
* 用例标题：预期结果+操作步骤
* 模块/项目：所属项目或模块
* 用例级别：标识用例的重要程度或者影响力P0~P4（P0最高）
* 预置条件：要执行此条用例，有哪些前置操作
* 测试输入：测试输入的数据，没有的话可以为空
* 测试步骤：描述操作步骤
* 预期结果：期望达到的结果

---

## 四、测试用例设计方法

### 4.1 等价类划分

等价类指在所有测试的数据中，具有某种共同特征的数据子集。等价类划分就是将不能穷举的测试过程进行分类，从而保证完整性和代表性。

**等价类的分类：**

* 有效等价类：代表对程序的有效输入
* 无效等价类：代表其他任何可能的输入条件（即不正确的输入值）

**等价类划分的基本步骤：**

1. 先确实有效和无效等价类
2. 有效等价类就是题目条件（两端的极值（边界值）要判断、中间随意一个值也要判断）
3. 无效等价类先划分与条件相反的情况，再找到特殊情况（中文、英文、符号、空格、空）

### 4.2 边界值分析

**边界范围：**

* 确定边界情况（输入或输出等价类的边界）
* 选取正好等于、刚刚好大于或刚刚好小于边界的值作为测试数据
* 上点：边界上的点
* 离点：距离上点最近的点
* 内点：范围内的点

**边界值分析的基本步骤：**

1. 明确需求
2. 确定有效和无效等价类
3. 确定边界值
4. 编写测试用例

### 4.3 因果图分析

适用于输入条件之间有相互制约、相互依赖的情况。

**基本符号：**

* 恒等 Identity

  * 若原因出现，则结果出现；若原因不出现，则结果不出现
* 非~ NOT

  * 若原因出现，则结果不出现；若原因不出现，则结果出现
* 与 AND

  * 若几个原因中有一个出现，则结果出现；若几个原因都不出现，则结果不出现
* 或v OR

  * 若几个原因都出现，则结果出现；若其中一个原因不出现，则结果不出现

**约束条件：**

* 互斥：最多有一个可能成立
* 包含：至少有一个必须成立
* 屏蔽：a成立时b不成立；a不成立时，b不一定成立
* 唯一：三个原因中有且只有一个成立
* 要求：一个出现另一个一定出现

**因果图分析的基本步骤：**

1. 找出所有的原因，原因即输入条件或输入条件的等价类
2. 找出所有的结果，结果即输出结果
3. 明确所有输入条件之间的制约关系以及组合关系

    * 哪些条件不能组合到一起，哪些条件可以组合到一起
4. 明确所有输出结果之间的制约关系以及组合关系

    * 哪些输出结果不能同时输出，哪些输出结果可以同时输出
5. 找出什么样的输入条件组合回产生哪种输出结果
6. 把因果图转换成判定表/决策表
7. 为判定表/决策表中的每一列表示的情况设计测试用例

### 4.4 语句覆盖

将程序中的每条语句至少执行一次。

### 4.5 判定覆盖

使得每一个判断都至少有一个为真和为假的输出结果。即每条分支路径都必须至少遍历一次。

### 4.6 条件覆盖

将一个判断中的每个条件的所有可能的结果至少执行一次。

### 4.7 判定/条件覆盖

将一个判断中的每个条件的所有可能的结果至少执行一次，将每个判断的所有可能的结果至少执行一次，将每个入口点都至少调用一次。

### 4.8 多重条件覆盖

将每个判定中的所有可能的条件结果的组合，以及所有的入口点都至少执行一次。

### 4.9  错误推测

**概念：**凭测试工程师的直觉和经验来推测项目中可能出现bug的地方进行测试。

适用：时间紧张或突发事件。

### 4.10 判定表法

判定表法表示的是有多个输入，和多个输出，而且输入与输入之间有相互的组合关系，输入和输入之间有相互的依赖关系。

**组成：**

* 条件桩：问题的所有条件
* 动作桩：问题的所有输出
* 条件项：针对条件桩的取值
* 动作项：条件项的各种取值情况下的输出结果

**判定表法的基本步骤：**

1. 列出所有的条件桩和动作桩
2. 填入条件项
3. 填入动作项，得到初始判定表
4. 简化判定表（合并相似规则（相同动作））

### 4.11 正交表

从全面试验中挑选出有代表性的点进行测试（均匀分散，整齐可比）；高效率、快速、经济的方法。

正交表是一种特制的表，一般的正交表记为L~n~(m^k^)

* n是表的行数，也就是需要测试组合的次数
* k是表的列数，表示控件的个数（因素的个数，或因子个数）
* m是每个控件包含的取值个数（各因素的水平数，即各因素的状态数）
* 如L9(3^4)

  * 有4个控件
  * 每个控件有3个取值
  * 9为需要测试的组合个数
  * 叫4因素3水平

**正交表的基本步骤：**

1. 根据所测程序中控件的个数（因素）以及每个控件的取值个数（水平），选取一个合适的正交排列表
2. 把控件及其取值列举出来，并对其进行编号
3. 把控件及其取值映射到正交排列表中

    * 把正交排列表中的ABCD（因子）分别替换成4个控件
    * 把每列中的1，2，3（状态）分别换成这个控件的3个取值（水平），排列顺序要按照表中给出的顺序
4. 根据映射好的正交排列表编写测试用例

**正交表的局限性：**

* 目前常用的正交表只有查询表中给出的这些
* 即使是已有的正交表，基本都要求每个控件中取值的个数要想等，这在实际软件中很少遇到

### 4.12 场景法

场景法主要用来测试业务流程，分为基本流（正确流程）和备选流（错误流程）。

注：还要补充一些异常情况。在冒烟测试中主要用场景法。

**场景法的基本步骤：**

1. 明确需求
2. 画出流程图
3. 根据流程图编写测试用例

    * 流程中有多少路径就对应多少测试用例

---

## 五、测试用例设计步骤

### 5.1 测试需求分析

从软件需求分析文档中，找出待测软件/模块的需求，通过自己的分析、理解，整理成为测试需求，要清楚被测对象具体包含哪些功能点。

### 5.2 业务流程分析：

对所在行业的业务知识要熟悉，然后对被测软件/模块的业务流程要进行全盘的整理出来（可画简单的流程图作为参考），主要包含该业务流程的主流程、备选流程、数据流向、关键判断条件以及完成该操作的非必要条件。

### 5.3 测试用例设计：

测试用例设计的类型主要包括功能测试、边界测试、异常测试、性能测试、压力测试等，在设计用例时要尽量考虑边界、异常等情况。

### 5.4 测试用例评审：

由测试用例设计者发起，参加的人员需包括测试负责人、项目经理、开发人员及其他相关的测试人员。

### 5.5 测试用例完善：

测试用例编写完成之后需不断完善，软件产品新增功能或更新需求后，测试用例必须配套修改更新；

在测试过程中发现设计测试用例时考虑不周，需要对测试用例进行修改完善；

在软件交付使用后客户反馈的软件缺陷，而缺陷又是因测试用例存在漏洞造成，也需要对测试用例进行完善；<br />

---

## 六、测试用例的维护

### 6.1 删除过时的测试用例

因为需求的改变等原因可能会使一个基线测试用例不再适合被测系统，那么这些测试用例就会过时，需要对这些测试用例进行及时的删除，在删除过程中，不能够将整行的测试用例删除，应该将要删除的测试用例整行置灰，并将该行的用例计数器清为空。

当整个功能模块需要删除时，则将整个SHEET状态置灰，并将用例计数器清空

### 6.2 修改的测试用例

随着软件项目的进展，测试需求可能会有部分变更，甚至大范围的变更，这个时候我们就会根据需求的变化相应的对测试用例进行维护，修改已经不符合目前需求的内容，并在备注栏中加以说明

### 6.3 删除冗余的测试用例

如果存在两个或更多测试用例对一组相同的输入和输入进行测试，则需要对其进行删除，只需留下其中的一个

### 6.4 增添新的测试用例

对新增的功能、在评审过程及测试过程中发现缺少测试用例或者系统出现BUG但是没有与之对应的测试用例，需要按照测试用例的设计标准进行增添，增加测试用例时，需要在相应功能模块的最下方插入新增的测试用例，并在备注栏中加以说明

---

## 七、测试用例评审

### 7.1 评审原因

测试用例是软件测试的原则，但由于软件人员对在需求理解、设计等理解程度不同等因素的影响，首次产生的测试用例质量难以避免会有不同程度的差异，故对编写的测试用例进行评审是很有必要的，其作用是测试用例的评审过程能够起到用例结构清晰化、场景覆盖全面化以及优先用例的合理化安排等。

### 7.2 评审内容

* 用例设计的结构安排是否清晰合理，是否高效的需求进行覆盖  用例的优先级别是否安排合理。
* 是否覆盖了测试需求的所有功能点，包括需求中的业务规则、所有用户可能使用的流程或场景等。
* 用例是否有很好的可执行性。例如用例的前提条件、执行步骤、输入数据和期待结果是否清晰、正确。
* 是否已经删除了冗余的测试用例。
* 是否包含充分的负面测试用例是否简洁、复用性强、是否易于管理。

### 7.3 评审过程

基于项目需求的测试计划完成之后，进行初审，主要是对测试范围和测试要点进行审查在测试用例的设计完成之后进行复审，主要是对测试用例的结构和覆盖率进行评审所有测试用例结束后，主要是对测试用例的具体描述是否有很好的可执行性，是否有冗余用例的存在进行评审。

### 7.4 评审人员

* 部门评审：测试部全体成员参与的评审
* 项目评审：项目组全体测试人员与部分开发人员、产品人员等组成的小组
* 内部评审：全部参与测试的人员

### 7.5 评审方式

* 会议评审：（包括内部评审及客户评审）。由设计该用例的人员进行讲解，参与会议评审的相关人员给出意见或建议，并记录评审的意见和建议。
* 邮件评审：邮件形式发给参与评审的相关人员，然后以邮件的形式把评审意见反馈给评审发起人。<br />
