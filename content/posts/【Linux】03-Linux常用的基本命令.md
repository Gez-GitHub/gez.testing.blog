---
title: "【Linux】03-Linux常用的基本命令"
date: 2022-04-01T12:27:01+08:00
draft: false
author: ""
description: "Linux"
images: []

tags: ["Linux","Linux目录相关命令","Linux内容查看命令","Linux文件属性","Linux链接"]
categories: ["TP316 操作系统"]

hiddenFromHomePage: false
hiddenFromSearch: false
ruby: true
fraction: true
fontawesome: true
linkToMarkdown: true
rssFullText: false

---

## 一、目录管理

##### 绝对路径和相对路径

* **绝对路径：** 路径的写法，由根目录 **/** 写起，例如： `/usr/share/doc`
* **相对路径：** 路径的写法，不是由 **/** 写起，例如由 `/usr/share/doc` 要到 `/usr/share/man` 底下时，可以写成： `cd ../man`

##### ls：列出目录及文件名

语法：

```bash
ls [-aAdfFhilnrRSt] 目录名称
```

* -a：all，查看全部文件，包括隐藏文件。
* -l：列出所有的文件，包含文件的权限和属性，不包含隐藏文件。
* -d：仅列出目录本身，而不是列出目录内的文件数据

示例：

```bash
# 查看当前目录下的文件
ls
# 查看当前目录下所有的文件，包括隐藏文件
ls -a
# 查看当前目录下的文件的权限和属性   
ls -l
# 查看当前目录下所有的文件的权限和属性，包括隐藏文件   
ls -al  
```

##### cd：切换目录

语法：

```bash
cd [相对路径或绝对路径]
```

示例：

```bash
# 切换至根目录
cd /
# 切换至home目录
cd home
# 通过相对路径进入usr目录下 
cd ../usr
# 通过绝对路径进入ztt目录下  
cd /home/ztt
# 返回上一级目录 
cd ..
# 进入当前的用户目录   
cd ～   
```

##### pwd：显示当前所在目录

语法：

```bash
pwd [-P]
```

* -P：显示出确实的路径，而非使用连结 (link) 路径。

示例：

```bash
pwd
```

##### mkdir：创建目录

语法：

```bash
mkdir [-mp] 目录名称
```

* -m：配置文件的权限，直接配置
* -p：直接将所需要的目录(包含上一级目录)递归创建

示例：

```bash
# 创建一个test1目录
mkdir test1
# 创建一个层级目录
mkdir -p test2/test3/test4  
# 创建权限为 rwx--x--x 的目录
mkdir -m 711 test2
```

权限部分，如果没有加上 -m 来强制配置属性，系统会使用默认属性。

##### rmdir：删除空目录

语法：

```bash
 rmdir [-p] 目录名称
```

* -p：从该目录起，一次删除多级空目录

示例：

```bash
# 删除test1目录
rmdir test1
# 递归删除一个层级目录
rmdir -p test2/test3/test4  
```

rmdir只能删除空目录，如果目录中存在文件，需先删除文件

##### cp：复制文件/目录

语法：

```bash
cp [-adfilprsu] 来源档(source) 目标档(destination)
```

* -a：相当于-pdr 的意思
* -d：若来源档为连结档的属性(link file)，则复制连结档属性而非文件本身
* -f：为强制(force)的意思，若目标文件已经存在且无法开启，则移除后再尝试一次
* -i：若目标档(destination)已经存在时，在覆盖时会先询问动作的进行
* -l：进行硬式连结(hard link)的连结档创建，而非复制文件本身
* -p：连同文件的属性一起复制过去，而非使用默认属性
* -r：递归持续复制，用于目录的复制行为
* -s：复制成为符号连结档 (symbolic link)，亦即快捷方式
* -u：若 destination 比 source 旧才升级 destination

示例：

```bash
# 从当前目录下拷贝anaconda-ks.cfg文件到../home/ztt目录下
cp anaconda-ks.cfg ../home/ztt  
```

##### rm：删除文件/目录

语法：

```bash
rm [-fir] 文件或目录
```

* -f ：就是 force 的意思，忽略不存在的文件，不会出现警告信息
* -i ：互动模式，在删除前会询问使用者是否动作
* -r ：递归删除，最常用在目录的删除，**非常危险**

示例：

```bash
# 删除what.txt文件
rm what.txt
# 递归删除test目录
rm -r test
# 递归删除test1目录，不询问
rm -rf test1
```

##### mv：移动文件/目录（重命名）

语法：

```bash
mv [-fiu] 来源档(source) 目标档(destination)
```

* -f：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖
* -i：若目标文件 (destination) 已经存在时，就会询问是否覆盖
* -u：若目标文件已经存在，且 source 比较新，才会升级 (update)

示例：

```bash
# 把当前目录下what.txt移动至ztt目录下
mv what.txt ztt/
# 将当前目录下what.txt文件重命名为what1.txt
mv what.txt what1.txt
```

---

## 二、基本属性

Linux系统是一个多用户系统，不同的用户拥有不同的权限。可以通过`ll` 或者`ls -l` 来查看一个文件的属性以及文件所属的用户和组。

![image01.png](/assets/linux_jbml01.png)

#### 第一栏含义

 第1字符：

* **【d】则是目录**
* **【-】则是文件**
* **【l】则是链接文档**
* 【b】则是装置文件里的可供存储的接口设备（可随机存取装置）
* 【c】则是装置文件里的串行端口设备（一次性读取装置）键盘、鼠标等

第2-10字符：

每3个一组，分别是2-4为属主权限（该文件的所有者）、5-7为属组的权限（该文件所有者的同组用户）、8-10为其他用户权限。其中 **r** 代表可读(read)、 **w** 代表可写(write)、 **x** 代表可执行(execute)。

|文件类型|属主权限|属组权限|其他用户权限|
| ----------| ------------| -------------| --------------|
|d|r    w   x|r    -    x|r    -     x|
|目录文件|读 写 执行|读 写 执行|读 写 执行|

其中：

* 第2、5、8位代表读权限："r"代表拥有读权限；"-"代表没有读权限
* 第3、6、9位代表写权限："w"代表拥有写权限；"-"代表没有写权限
* 第4、7、10位代表执行权限："x"代表拥有执行权限；"-"代表没有执行权限

#### 第三栏、第四栏含义

第三栏：当前文件的所有者，即属主

第四栏：当前文件所有者所在的用户组，即属组

#### 修改文件属性

-R：递归更改

##### chgrp更改文件属组

```shell
chgrp [-R] 属组名 文件名
```

##### chown更改文件属主，同时可更改文件属组

```shell
chown [-R] 属主名 文件名
chown [-R] 属主名:属组名 文件名
```

##### **chmod更改文件权限**

```shell
chomd [-R] xyz 文件或目录
```

文件权限有两种设置方式：

1. 符号：rwxr-xr--，根据需要进行更改

    ```shell
    chmod u=rwx,g=rx,o=r 文件名
    ```
2. 数字：

    rwx分数对照，r:4、w:2、x:1

    例：r-xr-xr--

    * 属主：r-x=4+0+1=5
    * 属组：r-x=4+0+1=5
    * 其他用户：r--=4+0+0=4
    * ```shell
      chomd 554 文件名
      ```

---

## 三、内容查看

##### cat：由第一行开始显示文件内容

语法：

```bash
cat [-AbEnTv] 文件名
```

* -A：相当于-vET 的整合选项，可列出一些特殊字符而不是空白
* -b：列出行号，仅针对非空白行做行号显示，空白行不标行号
* -E：将结尾的断行字节 $ 显示出来
* -n：列印出行号，连同空白行也会有行号，与 -b 的选项不同
* -T：将 [tab] 按键以 ^I 显示出来
* -v：列出一些看不出来的特殊字符

示例：

```bash
# 查看 /etc/issue 文件的内容
cat /etc/issue
```

##### tac：由最后一行开始显示文件内容

语法：

```bash
tac [-AbEnTv] 文件名
```

参数含义参考`cat` 命令。

示例：

```bash
# 倒着查看 /etc/issue 文件的内容
tac /etc/issue
```

##### nl：显示行号

语法：

```bash
nl [-bnw] 文件
```

* -b ：指定行号指定的方式，主要有两种：

  * -b a ：表示不论是否为空行，也同样列出行号(类似 cat -n)
  * -b t ：如果有空行，空的那一行不要列出行号(默认值)
* -n ：列出行号表示的方法，主要有三种：

  * -n ln ：行号在荧幕的最左方显示
  * -n rn ：行号在自己栏位的最右方显示，且不加 0
  * -n rz ：行号在自己栏位的最右方显示，且加 0
* -w ：行号栏位的占用的位数

示例：

```bash
# 用 nl 列出 /etc/issue 的内容
nl /etc/issue
```

##### more：一页一页显示文件内容

语法：

```bash
more 文件名
```

more运行时可以输入的命令有：

* 空白键 (space)：向下翻一页
* Enter：代表向下翻一行
* /字串：代表在这个显示的内容当中，向下搜寻“字串”
* :f ：立刻显示出档名以及目前显示的行数
* q：退出more命令，不再显示该文件内容
* b 或 [ctrl]-b：代表往回翻页，不过这动作只对文件有用，对管线无用

示例：

```bash
more /etc/man_db.config 
```

##### less：类似more，可以往前翻页

语法：

```bash
less 文件名
```

less运行时可以输入的命令有：

* 空白键 (space)：向下翻一页
* [pagedown]：向下翻一页
* [pageup]：向上翻一页
* /字串：向下搜寻“字串”
* ?字串：向上搜寻“字串”
* n：重复前一个搜寻 (与 / 或 ? 有关！)
* N：反向的重复前一个搜寻 (与 / 或 ? 有关！)
* q：退出less命令

示例：

```bash
less /etc/man.config
```

##### head：取出文件最前几行

语法：

```bash
head [-n number] 文件 
```

* -n ：后面接数字，代表显示几行的意思

示例：

```bash
# 默认的情况中，显示最前的10行
head /etc/man.config
# 若要显示最前的20行
head -n 20 /etc/man.config
```

##### tail：取出文件末尾几行

语法：

```bash
tail [-n number] 文件 
```

* -n ：后面接数字，代表显示几行的意思
* -f ：表示持续侦测后面所接的档名，要等到按下[ctrl]-c才会结束tail的侦测

示例：

```bash
# 默认的情况中，显示最后的10行
tail /etc/man.config
# 若要显示最后的20行
tail -n 20 /etc/man.config
```

##### man：查看命令帮助文档

语法：

```bash
man [命令]
```

示例：

```bash
man [cp]
```

---

## 四、Linux链接

Linux 链接分两种，一种被称为硬链接（Hard Link），另一种被称为软链接（符号连接 Symbolic Link）。默认情况下，`ln`命令产生硬链接。

##### 硬链接

硬链接指通过索引节点来进行连接。在 Linux 的文件系统中，保存在磁盘分区中的文件不管是什么类型都给它分配一个编号，称为索引节点号(Inode Index)。在 Linux 中，多个文件名指向同一索引节点是存在的。比如：A 是 B 的硬链接（A 和 B 都是文件名），则 A 的目录项中的 inode 节点号与 B 的目录项中的 inode 节点号相同，即一个 inode 节点对应两个不同的文件名，两个文件名指向同一个文件，A 和 B 对文件系统来说是完全平等的。删除其中任何一个都不会影响另外一个的访问。

硬链接的作用是允许一个文件拥有多个有效路径名，这样用户就可以建立硬连接到重要文件，以防止“误删”的功能。其原因如上所述，因为对应该目录的索引节点有一个以上的连接。只删除一个连接并不影响索引节点本身和其它的连接，只有当最后一个连接被删除后，文件的数据块及目录的连接才会被释放。也就是说，文件真正删除的条件是与之相关的所有硬连接文件均被删除。

##### 软链接

另外一种连接称之为符号连接（Symbolic Link），也叫软链接。软链接文件有类似于 Windows 的快捷方式。它实际上是一个特殊的文件。在符号连接中，文件实际上是一个文本文件，其中包含的有另一文件的位置信息。比如：A 是 B 的软链接（A 和 B 都是文件名），A 的目录项中的 inode 节点号与 B 的目录项中的 inode 节点号不相同，A 和 B 指向的是两个不同的 inode，继而指向两块不同的数据块。但是 A 的数据块中存放的只是 B 的路径名（可以根据这个找到 B 的目录项）。A 和 B 之间是“主从”关系，如果 B 被删除了，A 仍然存在（因为两个是不同的文件），但指向的是一个无效的链接。

示例：

```bash
# 创建一个测试文件f1
touch f1
# 创建f1的一个硬链接文件f2  
ln f1 f2
# 创建f1的一个符号连接文件f3  
ln -s f1 f3
# -i参数显示文件的inode节点信息   
ls -li  
```

![image02.png](/assets/linux_jbml02.png)

从上面的结果中可以看出，硬链接文件 f2 与原文件 f1 的 inode 节点相同，均为134，然而软链接文件f3的 inode 节点不同。

```bash
# 写入一句“This is F1”到f1文件中
echo "This is F1" >>f1
# 查看f1文件
cat f1
# 查看f2文件
cat f2
# 查看f3文件
cat f3
# 删除f1文件
rm -f f1
# 查看f2文件
cat f2
# 查看f3文件
cat f3
```

![image03.png](/assets/linux_jbml03.png)

通过上面的测试可以看出：当删除原始文件 f1 后，硬链接 f2 不受影响，但是软链接 f3 文件无效。
